AquaGuard data flow (text flowchart)
------------------------------------

Start (main.c)
    |
    v
Initialize defaults + parse CLI args into SharedState
    |
    v
Spawn threads
    |- sensor thread (TCP or SIM)
    |- HTTP thread (serves dashboard + SSE)

Sensor thread path
    |
    v
Check mode:
    TCP mode:
        connect to simulator host:port
        if fail: wait/backoff, retry
        if connected: read newline JSON lines
            -> parse with json.c
            -> update SharedState data + last_seq
            -> loop to keep reading
        if disconnected: mark SharedState disconnected, retry
    SIM mode:
        generate fake readings (flow, humidity, temp, pressure)
        calculate alerts
        write into SharedState data + last_seq
        sleep ~0.4s and repeat

HTTP thread path
    |
    v
Listen on web_port
    |
    v
For each client:
    if path == "/events":
        keep connection open (Server-Sent Events)
        loop:
            read SharedState
            if last_seq changed, send JSON update
            else send keepalive
    else:
        serve static file from web/ (HTML, CSS, JS, assets)

Browser dashboard
    |
    v
Loads HTML/CSS/JS from HTTP thread
Opens /events stream and updates UI whenever JSON arrives
Displays alerts/metrics and connection status based on SharedState values
