<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AquaGuard ‚Äì Live Dashboard</title>
  <link rel="stylesheet" href="/style.css" />
  <link rel="preconnect" href="/" />
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo"><img src="/assets/logo_aquagruard.png" alt="AquaGuard logo" class="logo-img" /></div>
        <div class="brand-text">
          <h1>AquaGuard</h1>
          <p>Live Dashboard</p>
        </div>
      </div>

      <div class="status-card">
        <div class="status-header">
          <span class="pill" id="conn-pill">
            <span class="dot" id="conn-dot"></span>
            <span id="conn-text">Disconnected</span>
          </span>
          <span class="mode-pill" title="Data source">
            <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            <code id="mode">‚Äî</code>
          </span>
        </div>

        <div class="kv">
          <div>
            <span class="k">Connection</span>
            <span class="v" id="via">via ‚Äî</span>
          </div>
          <div>
            <span class="k">Last update</span>
            <span class="v" id="last-updated">‚Äî</span>
          </div>
        </div>

        <button id="test-tone" class="btn btn-ghost" type="button" aria-label="Test alert sound">
          üîî Test alert
        </button>
      </div>

      <div class="legend">
        <span class="legend-item"><span class="legend-dot ok"></span>Normal</span>
        <span class="legend-item"><span class="legend-dot warn"></span>Humidity alert</span>
        <span class="legend-item"><span class="legend-dot err"></span>Temp/Pressure alert</span>
      </div>

      <footer class="sidebar-footer">
        <small>Group 10 ¬∑ IE University</small>
        <small>Refreshing in real time (SSE)</small>
      </footer>
    </aside>

    <main class="main">
      <section class="topbar">
        <div class="title">
          <h2>Overview</h2>
          <p class="subtitle">Live metrics from gateway</p>
        </div>
      </section>

      <section class="grid">
        <article class="card metric-card">
          <header>
            <h3>Flow</h3>
            <span class="trend" id="flow-trend" aria-live="polite">‚Äî</span>
          </header>
          <div class="metric">
            <span id="flow" class="value">‚Äî</span>
            <span class="unit">L/min</span>
          </div>
          <canvas id="flow-spark" width="320" height="64" aria-hidden="true"></canvas>
        </article>

        <article class="card metric-card">
          <header>
            <h3>Humidity</h3>
            <span class="trend" id="hum-trend" aria-live="polite">‚Äî</span>
          </header>
          <div class="metric">
            <span id="humidity" class="value">‚Äî</span>
            <span class="unit">%</span>
          </div>
          <canvas id="hum-spark" width="320" height="64" aria-hidden="true"></canvas>
        </article>

        <article class="card metric-card">
          <header>
            <h3>Temperature</h3>
            <span class="trend" id="temp-trend" aria-live="polite">‚Äî</span>
          </header>
          <div class="metric">
            <span id="temperature" class="value">‚Äî</span>
            <span class="unit">¬∞C</span>
          </div>
          <canvas id="temp-spark" width="320" height="64" aria-hidden="true"></canvas>
        </article>

        <article class="card metric-card">
          <header>
            <h3>Pressure</h3>
            <span class="trend" id="pressure-trend" aria-live="polite">‚Äî</span>
          </header>
          <div class="metric">
            <span id="pressure" class="value">‚Äî</span>
            <span class="unit">kPa</span>
          </div>
          <canvas id="pressure-spark" width="320" height="64" aria-hidden="true"></canvas>
        </article>
      </section>

      <section id="banner" class="banner hidden" role="alert" aria-live="assertive">
        <div class="banner-icon" id="banner-icon">‚ö†Ô∏è</div>
        <div class="banner-content">
          <strong id="banner-title">Emergency</strong>
          <span id="banner-text">‚Äî</span>
        </div>
        <a id="emergency-link" href="tel:112" class="btn btn-danger">Call emergency</a>
      </section>

      <section class="log card" aria-label="Event log">
        <header class="log-header">
          <h3>Recent events</h3>
          <button id="clear-log" class="btn btn-ghost" type="button">Clear</button>
        </header>
        <ul id="event-log" class="log-list"></ul>
      </section>
    </main>
  </div>

  <audio id="alert-sound" preload="auto">
    <source src="data:audio/wav;base64,UklGRjQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA=" type="audio/wav" />
  </audio>

  <script src="/app.js"></script>
</body>
</html>
